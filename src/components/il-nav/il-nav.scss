// Base variables

:root {
  --il-nav--item--padding-top: .75em;
  --il-nav--item--padding-right: 1em;
  --il-nav--item--padding-bottom: .75em;
  --il-nav--item--padding-left: 1em;
  --il-nav--item--label--padding-right: .25em;
  --il-nav--item--indicator--padding-left: .25em;

  --il-nav--item--header--white-space: normal;
}

:root {

  --il-nav--level-1--indent: .75em;
  --il-nav--level-2--indent: calc(var(--il-nav--level-1--indent) + 1.5em);
  --il-nav--level-3--indent: calc(var(--il-nav--level-2--indent) + 1.5em);
  --il-nav--level-4--indent: calc(var(--il-nav--level-3--indent) + 1.5em);
  --il-nav--level-5--indent: calc(var(--il-nav--level-4--indent) + 1.5em);
  --il-nav--level-6--indent: calc(var(--il-nav--level-5--indent) + 1.5em);


  --il-nav-chevron-down: rotate(0deg);
  --il-nav-chevron-up: rotate(180deg);
  --il-nav-chevron-left: rotate(90deg);
  --il-nav-chevron-right: rotate(-90deg);

  --il-nav--content--invisible--display: block;

  --il-nav--content--collapsed--display: none;


  // Section styles: accordion, dropdown, & flyout

  --il-nav--accordion--section--display: block;
  --il-nav--accordion--section--width: 100%; // TODO: Remove
  --il-nav--accordion--section--header-chevron--transform: var(--il-nav-section-chevron-down);
  --il-nav--accordion--section--content--width: 100%;
  --il-nav--accordion--section--content--top: 100%;
  --il-nav--accordion--section--content--left: 0;
  --il-nav--accordion--section--content--position: relative;
  --il-nav--accordion--section--content--display: none;
  --il-nav--accordion--section--expanded--content--display: block;

  --il-nav--accordion--level-1--padding: .75em;
  --il-nav--accordion--level-2--padding: .75em .75em .75em 2.25em;
  --il-nav--accordion--level-3--padding: .75em .75em .75em 3.75em;
  --il-nav--accordion--level-4--padding: .75em .75em .75em 5.25em;
  --il-nav--accordion--level-5--padding: .75em .75em .75em 6.75em;
  --il-nav--accordion--level-6--padding: .75em .75em .75em 8.25em;

  --il-nav--dropdown--section--content--width: 20em;
  --il-nav--dropdown--section--content--top: 100%;
  --il-nav--dropdown--section--content--left: 0;
  --il-nav--dropdown--section--header-chevron--transform: var(--il-nav-section-chevron-down);
  --il-nav--dropdown--section--content-position: absolute;

  --il-nav--flyout--section--display: block;
  --il-nav--flyout--section--width: 100%;
  --il-nav--flyout--section--content--width: 20em;
  --il-nav--flyout--section--content--top: 0;
  --il-nav--flyout--section--content--left: 100%;
  --il-nav--flyout--section--header-chevron--transform: var(--il-nav-section-chevron-right);
  --il-nav--flyout--section--content--position: absolute;


  // Navigation levels

  --il-nav--level-1--background-color: white;
  --il-nav--level-1--color: white;
  --il-nav--level-1--focus--background-color: white;
  --il-nav--level-1--focus--color: white;

  --il-nav--level-2--background-color: white;
  --il-nav--level-2--color: white;
  --il-nav--level-2--focus--background-color: white;
  --il-nav--level-2--focus--color: white;

  --il-nav--level-3--background-color: white;
  --il-nav--level-3--color: white;
  --il-nav--level-3--focus--background-color: white;
  --il-nav--level-3--focus--color: white;

  --il-nav--level-4--background-color: white;
  --il-nav--level-4--color: white;
  --il-nav--level-4--focus--background-color: white;
  --il-nav--level-4--focus--color: white;

  --il-nav--level-5--background-color: white;
  --il-nav--level-5--color: white;
  --il-nav--level-5--focus--background-color: white;
  --il-nav--level-5--focus--color: white;

  --il-nav--level-6--background-color: white;
  --il-nav--level-6--color: white;
  --il-nav--level-6--focus--background-color: white;
  --il-nav--level-6--focus--color: white;

  --il-nav--bar--level-1--contents--left: 0;
  --il-nav--bar--level-1--contents--top: 100%;
}

// Navigation bar

%il-nav--bar {
  a:not([slot=link]) {
    all: initial;
    display: block;

    //padding: var(--il-nav--link--padding);
    padding-top: var(--il-nav--item--padding-top);
    padding-right: var(--il-nav--item--padding-right);
    padding-bottom: var(--il-nav--item--padding-bottom);
    padding-left: var(--il-nav--item--padding-left);

    background-color: var(--il-nav--link--background-color);
    color: var(--il-nav--link--color);
    font: 600 1.1875em/1em var(--il-font-sans);
    cursor: pointer;
    position: relative;

    &:hover, &:focus {
      background-color: var(--il-nav--link--focus--background-color);
      color: var(--il-nav--link--focus--color);
    }
  }

  il-nav-section {
    display: block;
  }

  background-color: var(--il-cloud-1);
  --il-nav-section-content-display: none;
  --il-nav-section--content--width: 20em;

  ul {
    all: initial;
    display: block;
  }

  & > ul {
    display: flex;
    flex-direction: row;
  }

  li {
    all: initial;
    display: block;
    margin-top: 1px;

    &:first-child {
      margin-top: 0;
    }
  }

  // Top-level link
  & > ul > li > a {
    padding-top: var(--il-nav--item--padding-top);
    padding-right: var(--il-nav--item--padding-top);
    padding-bottom: var(--il-nav--item--padding-top);
    padding-left: var(--il-nav--item--padding-top);
    background-color: var(--il-cloud-1);
    color: var(--il-blue);

    &:focus, &:hover {
      background-color: white;
      color: var(--il-altgeld);
    }
  }

  & > ul > li > il-nav-section {
    @extend %il-nav--bar--dropdown;
  }

  il-nav-section il-nav-section {
    @extend %il-nav--bar--flyout;
  }

}

%il-nav--bar--dropdown {

  --il-nav--link--background-color: var(--il-cloud-1);
  --il-nav--link--color: var(--il-blue);
  --il-nav--link--focus--background-color: white;
  --il-nav--link--focus--color: var(--il-altgeld);

  --il-nav-section--header--link--background-color: var(--il-cloud-1);
  --il-nav-section--header--link--color: var(--il-blue);
  --il-nav-section--header--link--focus--background-color: white;
  --il-nav-section--header--link--focus--color: var(--il-altgeld);

  --il-nav-section--header--button--background-color: var(--il-cloud-1);
  --il-nav-section--header--button--color: var(--il-blue);
  --il-nav-section--header--button--focus--background-color: white;
  --il-nav-section--header--button--focus--color: var(--il-altgeld);

  --il-nav-section--content--position: absolute;
  --il-nav-section--content--left: 0;
  --il-nav-section--content--top: 100%;
  --il-nav-section--content--background-color: var(--il-cloud-1);
  --il-nav-section--content--padding: 0 1px 1px;
  --il-nav-section--content--margin: 0 -1px;

  --il-nav-indicator--arrow--transform: var(--il-nav-indicator--down);
  --il-nav--header--white-space: nowrap;

  & > a {
    white-space: nowrap;
  }
}

%il-nav--bar--dropdown--expanded {
  --il-nav--link--background-color: var(--il-blue);
  --il-nav--link--color: white;
  --il-nav--link--focus--background-color: var(--il-orange);
  --il-nav--link--focus--color: var(--il-blue);
  --il-nav-section--header--link--background-color: var(--il-blue);
  --il-nav-section--header--link--color: white;
  --il-nav-section--header--link--focus--background-color: var(--il-orange);
  --il-nav-section--header--link--focus--color: var(--il-blue);
  --il-nav-section--header--button--background-color: var(--il-blue);
  --il-nav-section--header--button--color: white;
  --il-nav-section--header--button--focus--background-color: var(--il-orange);
  --il-nav-section--header--button--focus--color: var(--il-blue);
  --il-nav-indicator--arrow--transform: var(--il-nav-indicator--up);
}


%il-nav--bar--flyout {
  --il-nav-section--content--left: 100%;
  --il-nav-section--content--top: 0;
  --il-nav-section--content--padding: 1px;
  --il-nav-section--content--margin: -1px -1px 0;
  --il-nav-section--content--background-color: var(--il-cloud-1);
  --il-nav-indicator--arrow--transform: var(--il-nav-indicator--right);
}


// Column

%il-nav--column {

  --il-nav--link--background-color: var(--il-cloud-1);
  --il-nav--link--color: var(--il-blue);

  --il-nav-section--header--link--background-color: var(--il-cloud-1);
  --il-nav-section--header--link--color: var(--il-blue);

  --il-nav-section--header--button--background-color: var(--il-cloud-1);
  --il-nav-section--header--button--color: var(--il-blue);

  --il-nav-section--content--position: relative;
  --il-nav-section--content--left: 0;
  --il-nav-section--content--top: 0;
  --il-nav-section--content--background-color: white;
  --il-nav-section--content--padding: 2px 0 0;
  --il-nav-section--content--margin: 0;

  --il-nav-indicator--arrow--transform: var(--il-nav-indicator--down);

  --il-nav--item--padding-top: .75em;
  --il-nav--item--padding-right: 1em;
  --il-nav--item--padding-bottom: .75em;
  --il-nav--item--padding-left: 1em;
  --il-nav--item--label--padding-right: 1em;
  --il-nav--item--indicator--padding-left: 1em;

  --il-nav--link--focus--background-color: var(--il-orange);
  --il-nav--link--focus--color: var(--il-blue);
  --il-nav-section--header--link--focus--background-color: var(--il-orange);
  --il-nav-section--header--link--focus--color: var(--il-blue);
  --il-nav-section--header--button--focus--background-color: var(--il-orange);
  --il-nav-section--header--button--focus--color: var(--il-blue);


  a:not([slot=link]) {
    all: initial;
    display: block;

    //padding: var(--il-nav--link--padding);
    padding-top: var(--il-nav--item--padding-top);
    padding-right: var(--il-nav--item--padding-right);
    padding-bottom: var(--il-nav--item--padding-bottom);
    padding-left: var(--il-nav--item--padding-left);

    background-color: var(--il-nav--link--background-color);
    color: var(--il-nav--link--color);
    font: 600 1.1875em/1em var(--il-font-sans);
    cursor: pointer;
    position: relative;

    &:hover, &:focus {
      background-color: var(--il-nav--link--focus--background-color);
      color: var(--il-nav--link--focus--color);
    }
  }

  il-nav-section {
    display: block;
  }

  ul {
    all: initial;
    display: block;
  }

  li {
    all: initial;
    display: block;
    margin-top: 2px;

    &:first-child {
      margin-top: 0;
    }
  }

  & > ul > li > a {
    --il-nav--link--background-color: var(--il-cloud-1);
    --il-nav--link--color: var(--il-blue);
  }

  il-nav-section[data-il-nav-size="expanded"] {
    --il-nav-section--content--background-color: var(--il-cloud-1);
    --il-nav-section--header--link--background-color: white;
    --il-nav-section--header--link--color: var(--il-blue);
    --il-nav-section--header--button--background-color: white;
    --il-nav-section--header--button--color: var(--il-blue);
    --il-nav--link--background-color: white;
    --il-nav--link--color: var(--il-blue);
  }

  il-nav-section[data-il-nav-current="true"] {
    --il-nav-section--content--background-color: var(--il-cloud-1);
    --il-nav-section--header--link--background-color: var(--il-blue);
    --il-nav-section--header--link--color: white;
    --il-nav-section--header--button--background-color: var(--il-blue);
    --il-nav-section--header--button--color: white;
    --il-nav--link--background-color: var(--il-blue);
    --il-nav--link--color: white;
  }

  il-nav-section[data-il-nav-level] {
    display: none;
  }

  il-nav-section[data-il-nav-level="1"] {
    display: block;
    --il-nav--item--padding-left: var(--il-nav--level-1--indent);

    & > ul > li > a {
      --il-nav--item--padding-left: var(--il-nav--level-2--indent);
    }
  }

  il-nav-section[data-il-nav-level="2"] {
    display: block;
    --il-nav--item--padding-left: var(--il-nav--level-2--indent);

    & > ul > li > a {
      --il-nav--item--padding-left: var(--il-nav--level-3--indent);
    }
  }

  il-nav-section[data-il-nav-level="3"] {
    display: block;
    --il-nav--item--padding-left: var(--il-nav--level-3--indent);

    & > ul > li > a {
      --il-nav--item--padding-left: var(--il-nav--level-4--indent);
    }
  }

  il-nav-section[data-il-nav-level="4"] {
    display: block;
    --il-nav--item--padding-left: var(--il-nav--level-4--indent);

    & > ul > li > a {
      --il-nav--item--padding-left: var(--il-nav--level-5--indent);
    }
  }

  il-nav-section[data-il-nav-level="5"] {
    display: block;
    --il-nav--item--padding-left: var(--il-nav--level-5--indent);

    & > ul > li > a {
      --il-nav--item--padding-left: var(--il-nav--level-6--indent);
    }
  }

  & > ul > li > il-nav-section {
    --il-nav-section--header--link--background-color: var(--il-cloud-1);
    --il-nav-section--header--link--color: var(--il-blue);
  }
}

%il-nav--eyebrow {
  display: block;

  ul {
    all: initial;
    position: relative;
    display: flex;
    flex-direction: row;
    justify-content: flex-end;
    width: auto;
  }

  li {
    all: initial;
    display: block;
    position: relative;
    padding: 0 1em 0 0;

    &:last-of-type {
      padding-right: 0;
    }

    &::after {
      position: absolute;
      top: .5em;
      right: 0;
      content: "/";
      width: 1.5em;
      text-align: center;
      color: var(--il-altgeld);
      font: 600 .75em/1em var(--il-font-sans);
    }

    &:last-of-type::after {
      content: "";
      display: none;
    }
  }

  a {
    all: initial;
    display: block;
    font: 600 1em var(--il-font-sans);
    color: var(--il-blue);
    cursor: pointer;

    &:focus, &:hover {
      color: var(--il-altgeld);
      text-decoration: underline;
    }

    &:focus {
      outline: none;
    }
  }

  il-nav-section {
    display: none;
  }
}


il-nav {
  display: block;
  container-type: inline-size;
  box-sizing: border-box;

  il-nav-section > a {
    white-space: var(--il-nav--item--header--white-space);
  }

  &.il-nav-bar, &.il-nav-column {
  }
}

il-nav {
  &.il-nav-bar {
    @extend %il-nav--bar;

    & > ul > li > il-nav-section {
      @extend %il-nav--bar--dropdown;

      &[data-il-nav-size="expanded"] {
        @extend %il-nav--bar--dropdown--expanded;
      }
    }

    il-nav-section il-nav-section {
      @extend %il-nav--bar--flyout;
    }
  }

  // Accordion
  &.il-nav-column {
    @extend %il-nav--column;
  }
}

il-header il-nav[slot=links] {
  @extend %il-nav--eyebrow;
}
